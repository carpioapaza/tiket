<% provide(:title, @event.name) %>

<div>
  <!-- Hero Section -->

<% if @event.image.attached? %>
  <div class="hero-section" style="background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.8)), url('<%= rails_blob_path(@event.image, only_path: true) %>');">
    <div class="container">
      <h1><%= @event.name %></h1>
      <p><%= @event.start_datetime.strftime("%B %d, %Y %I:%M %p") %> - <%= @event.end_datetime.strftime("%B %d, %Y %I:%M %p") %></p>
    </div>
  </div>
<% else %>
  <div class="hero-section">
    <div class="container">
      <h1><%= @event.name %></h1>
      <p><%= @event.start_datetime.strftime("%B %d, %Y %I:%M %p") %> - <%= @event.end_datetime.strftime("%B %d, %Y %I:%M %p") %></p>
    </div>
  </div>
<% end %>



  <!-- Event Details Section -->
  <div class="row mt-4">
    <div class="col-md-8">
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="card-title">Event Details</h2>
          <p class="card-text"><%= @event.description %></p>

          <ul class="list-group list-group-flush">
            <li class="list-group-item"><strong>Visibility:</strong> <%= @event.visibility.humanize %></li>
            <li class="list-group-item"><strong>Restriction:</strong> <%= @event.restriction.humanize %></li>
            <li class="list-group-item"><strong>Capacity:</strong> <%= @event.capacity %></li>
            <li class="list-group-item"><strong>Video URL:</strong> <%= link_to @event.video_url, @event.video_url, target: "_blank" %></li>
            <li class="list-group-item"><strong>Status:</strong> <%= @event.admin_status.humanize %></li>
          </ul>
        </div>
      </div>

      <!-- Location Section -->
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="card-title">Location Information</h2>
          <% if @event.location.present? %>
            <p><strong>City:</strong> <%= @event.city.name %></p>
            <p><strong>Address:</strong> <%= @event.location.address %></p>
            <p><strong>Reference:</strong> <%= @event.location.reference %></p>
          <% else %>
            <p>Location information not available.</p>
          <% end %>
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <!-- Category Section -->
      <div class="card mb-4">
        <div class="card-body">
          <h2 class="card-title">Category</h2>
          <p>
            <span><%= @event.category.name %></span>
          </p>
        </div>
      </div>

      <!-- Actions Section -->
      <div class="card mb-4">
        <div class="card-body text-center">
          <%= link_to 'Buy Tickets', event_path(@event), class: 'btn btn-primary btn-lg' %>
        </div>
      </div>

      <!-- Event Image -->
      <% if @event.image.attached? %>
        <div class="card mb-4">
          <div class="card-body text-center">
            <%= image_tag @event.image, class: 'img-fluid' %>
          </div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Video Section -->
  <% if @event.video_url.present? %>
    <div class="row mt-4">
      <div class="col-md-12">
        <div class="card">
          <div class="card-body text-center">
            <h2 class="card-title">Event Video</h2>
            <%= video_tag(@event.video_url, class: "w-100", controls: true) %>
            <iframe width="560" height="315" src="<%= @event.video_url %>" frameborder="0" allowfullscreen></iframe>


          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>
